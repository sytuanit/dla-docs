# 備份與還原

## 1. 目的

**備份與還原**模組可協助您：
- 將所有應用程式資料備份到檔案
- 從備份檔案還原資料
- 保護資料免於因裝置錯誤或應用程式重新安裝而遺失

## 2. 使用時機

當您想：
- 在重新安裝應用程式前備份資料時
- 將資料轉移到新裝置時
- 在資料遺失後還原資料時
- 建立定期備份時

## 3. 相關畫面

- 備份畫面
- 還原畫面

## 4. 主要使用方式

### 4.1 備份資料

1. 前往**設定** → **備份與資料** → **備份**
2. 查看資訊：
   - 要備份的記錄數
   - 預期檔案大小
3. 點擊**備份**
4. 選擇儲存位置（檔案系統）
5. 將建立名為 `dla-backup-YYYY-MM-DD-HHmmss.json` 的備份檔案
6. 將此檔案儲存在安全的地方（雲端、電腦等）

### 4.2 還原資料

1. 前往**設定** → **備份與資料** → **還原**
2. 從檔案系統選擇備份檔案
3. 查看檔案資訊：
   - 備份建立日期
   - 記錄數
   - 檔案大小
4. **警告**：還原將覆蓋所有目前資料
5. 點擊**還原**
6. 確認還原
7. 等待還原程序完成
8. 應用程式將自動重新載入

## 5. 介面說明（線框圖）

### 5.1 備份畫面

```text
┌─────────────────────────────────────────┐
│  ← 返回    備份資料                      │
├─────────────────────────────────────────┤
│  備份資訊                                │
│                                         │
│  ┌───────────────────────────────────┐ │
│  │ 記錄數                              │
│  │ 1,234 筆記錄                       │
│  │                                    │
│  │ 預期大小                            │
│  │ ~2.5 MB                            │
│  │                                    │
│  │ 要備份的資料：                      │
│  │ • 定期收入                          │
│  │ • 定期支出                          │
│  │ • 日常支出                          │
│  │ • 預算                              │
│  │ • 儲蓄                              │
│  │ • 貸款                              │
│  │ • 特殊場合                          │
│  │ • 類別                              │
│  └───────────────────────────────────┘ │
│                                         │
│  [備份]                                 │
└─────────────────────────────────────────┘
```

### 5.2 還原畫面

```text
┌─────────────────────────────────────────┐
│  ← 返回    還原資料                      │
├─────────────────────────────────────────┤
│  選擇備份檔案                            │
│                                         │
│  [選擇檔案...]                          │
│                                         │
│  檔案資訊                                │
│  ┌───────────────────────────────────┐ │
│  │ 檔案：dla-backup-2024-11-15.json │ │
│  │                                    │
│  │ 建立時間：11/15/2024 10:30        │
│  │                                    │
│  │ 記錄數：1,234                     │
│  │                                    │
│  │ 大小：2.5 MB                       │
│  └───────────────────────────────────┘ │
│                                         │
│  ⚠️ 警告                                │
│  還原將覆蓋所有目前資料。                │
│  您確定嗎？                             │
│                                         │
│  [還原] [取消]                          │
└─────────────────────────────────────────┘
```

## 6. 邏輯與規則

### 6.1 備份檔案格式

- 備份檔案為 JSON 格式
- 檔案名稱：`dla-backup-YYYY-MM-DD-HHmmss.json`
- 包含所有資料：使用者、類別、交易、預算等

### 6.2 備份的資料

- 資料庫中的所有表格
- 包括系統資料和使用者資料
- 不包括：應用程式設定、偏好設定（語言、貨幣）

### 6.3 還原

- 還原將刪除所有目前資料
- 然後從備份檔案匯入資料
- 還原完成後應用程式將自動重新載入

### 6.4 驗證

- 應用程式在還原前檢查檔案格式
- 檢查版本相容性（如有）
- 如果檔案無效則顯示錯誤

## 7. 重要注意事項

- **定期備份**：應定期備份（每週或每月）
- **多處儲存**：將備份檔案儲存在多個地方（雲端、電腦、USB）
- **還原將遺失目前資料**：在還原前確保您已備份目前資料
- **無法復原**：還原後無法復原

