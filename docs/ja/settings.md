# 設定

## 1. 目的

**設定**モジュールでは、個人のニーズに応じてアプリを設定できます：
- 言語と通貨
- 通知
- カテゴリ
- データのバックアップと復元
- セキュリティ（パスワード、Face ID）

## 2. 使用するタイミング

以下の場合にこのモジュールを使用します：
- 言語または通貨を変更
- 通知を有効化/無効化
- カテゴリを管理（追加、編集、削除、デフォルト設定）
- データのバックアップまたは復元
- パスワードの変更またはFace IDの有効化

## 3. 関連画面

- メイン設定画面
- 基本設定
- 言語選択
- 通貨選択
- カテゴリ管理
- データバックアップ
- データ復元
- パスワード変更
- Face ID / 指紋認証の有効化

## 4. 主な使用方法

### 4.1 言語を変更

1. **設定** → **表示と言語** → **言語**に移動
2. 希望する言語を選択
3. アプリが新しい言語で自動的に再読み込みされます

### 4.2 通貨を変更

1. **設定** → **表示と言語** → **通貨**に移動
2. 通貨タイプを選択
3. すべての金額が新しい単位で表示されます

### 4.3 通知を有効化/無効化

1. **設定** → **通知**に移動
2. **通知**スイッチを切り替え
3. 有効化すると、以下のリマインドを受信します：
   - 定期収入の期日
   - 定期支出の期日
   - 貯蓄口座の満期
   - 特別な日の到来

### 4.4 カテゴリを管理

1. **設定** → **カテゴリ**に移動
2. 管理するカテゴリタイプを選択：
   - 定期収入
   - 臨時収入
   - 定期支出
   - 日々の支出
3. カテゴリを追加/編集/削除
4. デフォルトカテゴリを設定（日々の支出用）

### 4.5 データをバックアップ

1. **設定** → **バックアップとデータ** → **バックアップ**に移動
2. 保存場所を選択（ファイルシステム）
3. **バックアップ**をタップ
4. バックアップファイルが作成されます

### 4.6 データを復元

1. **設定** → **バックアップとデータ** → **復元**に移動
2. ファイルシステムからバックアップファイルを選択
3. 復元を確認
4. **注意**: 復元は現在のデータを上書きします

## 5. UI図解（ワイヤーフレーム）

### 5.1 メイン設定画面

```text
┌─────────────────────────────────────────┐
│  ← 戻る    設定                          │
├─────────────────────────────────────────┤
│  表示と言語                               │
│  ┌───────────────────────────────────┐ │
│  │ 言語                                │ │
│  │ 日本語                        →     │ │
│  │                                    │ │
│  │ 通貨                                │ │
│  │ JPY (¥)                       →     │ │
│  └───────────────────────────────────┘ │
│                                         │
│  通知                                    │
│  ┌───────────────────────────────────┐ │
│  │ 通知                          [ON]  │ │
│  └───────────────────────────────────┘ │
│                                         │
│  バックアップとデータ                    │
│  ┌───────────────────────────────────┐ │
│  │ バックアップ                    →    │ │
│  │                                    │ │
│  │ 復元                           →    │ │
│  └───────────────────────────────────┘ │
│                                         │
│  カテゴリ                                │
│  ┌───────────────────────────────────┐ │
│  │ カテゴリを管理                  →    │ │
│  └───────────────────────────────────┘ │
│                                         │
│  セキュリティ                            │
│  ┌───────────────────────────────────┐ │
│  │ パスワード                      →    │ │
│  │                                    │ │
│  │ Face ID / 指紋認証              →    │ │
│  └───────────────────────────────────┘ │
└─────────────────────────────────────────┘
```

## 6. ロジックとルール

### 6.1 言語

- 対応言語: 英語、Tiếng Việt、日本語
- 言語を変更すると、アプリ全体が再読み込みされます
- システムカテゴリは新しい言語に自動的に翻訳されます

### 6.2 通貨

- 各言語にはデフォルト通貨があります（例：英語の場合はUSD）
- 異なる通貨を選択できます
- すべての金額が選択した通貨に従ってフォーマットされます

### 6.3 通知

- 通知はアプリに権限がある場合のみ機能します
- 通知時間は各機能によって異なり、設定できます：
  - 定期収入/支出: `notificationTime1`、`notificationTime2`（デフォルト16:00と19:00）
  - 貯蓄口座とローン: `notificationTime1`、`notificationTime2`（デフォルト10:00と19:00）
  - 特別な日と準備ステップ: 入力した`reminderTime`に従う
  - 各タイプの通知を個別に無効化できます（将来）

### 6.4 カテゴリ

- システムカテゴリは削除できず、無効化のみ可能
- ユーザーカテゴリは削除できます（使用されていない場合）
- 各カテゴリタイプは独立しています（定期収入、日々の支出など）

## 7. 重要な注意事項

- **定期的にバックアップ**: データ損失を避けるため、定期的にデータをバックアップする必要があります
- **復元は上書き**: 復元はすべての現在のデータを置き換えます
- **パスワード**: パスワードを忘れた場合、リセットできます（データが削除されます）

