# Budget

## 1. Objectif

Le module **Budget** vous aide Ã  planifier et suivre les dÃ©penses mensuelles et s'assure que vous ne dÃ©passez pas votre budget Ã©tabli. Ce module calcule automatiquement en fonction de :
- Vos revenus rÃ©currents
- Vos dÃ©penses rÃ©currentes
- DÃ©penses quotidiennes rÃ©elles

## 2. Quand utiliser

Utilisez ce module si vous souhaitez :
- Planifier les dÃ©penses mensuelles
- ContrÃ´ler que vous ne dÃ©passez pas le budget
- Suivre le taux d'Ã©pargne
- Voir l'analyse des dÃ©penses par catÃ©gorie
- Comparer les budgets entre les mois

## 3. Ã‰crans associÃ©s

- CrÃ©er un budget (premiÃ¨re fois ou copier du mois prÃ©cÃ©dent)
- Afficher le rÃ©sumÃ© du budget
- Historique du budget par mois
- Suggestion de copie du mois prÃ©cÃ©dent

## 4. Utilisation principale

### 4.1 CrÃ©er un budget pour la premiÃ¨re fois (Cas A)

1. Allez Ã  **Fonctions** â†’ SÃ©lectionnez **Budget**
2. Si aucun budget n'existe, l'application ouvre automatiquement l'Ã©cran **CrÃ©er un Budget**
3. L'application calcule et affiche automatiquement :
   - **Revenus RÃ©currents** : Total de tous les revenus rÃ©currents actifs (lecture seule, affiche le dÃ©tail)
   - **DÃ©penses RÃ©currentes** : Total de toutes les dÃ©penses rÃ©currentes actives (lecture seule, affiche le dÃ©tail)
   - **Budget Total (avant Ã©pargne)** : CalculÃ© automatiquement = Revenus RÃ©currents - DÃ©penses RÃ©currentes
4. Entrez le **Taux d'Ã‰pargne** : % d'Ã©pargne (0-100%, requis)
5. Affichez le **Montant d'Ã‰pargne** et le **Budget de DÃ©penses** calculÃ©s automatiquement
6. Appuyez sur **Enregistrer le Budget**

### 4.2 Copier le budget du mois prÃ©cÃ©dent (Cas C)

1. Allez Ã  **Fonctions** â†’ SÃ©lectionnez **Budget**
2. Si le mois actuel n'a pas de budget, mais le mois prÃ©cÃ©dent en a un, l'application affiche l'Ã©cran **Suggestion de Copier le Budget**
3. SÃ©lectionnez une des options :
   - **Copier tout le budget du mois prÃ©cÃ©dent** : L'application copie automatiquement le taux d'Ã©pargne, recalcule les revenus/dÃ©penses rÃ©currents Ã  partir des donnÃ©es actuelles et crÃ©e le budget immÃ©diatement
   - **Copier et Ajuster** : L'application navigue vers l'Ã©cran CrÃ©er un Budget avec le taux d'Ã©pargne prÃ©-rempli du mois prÃ©cÃ©dent, vous pouvez ajuster avant d'enregistrer
   - **CrÃ©er un Nouveau Budget** : ExÃ©cuter le flux de crÃ©ation de budget depuis le dÃ©but (Cas A)
4. Si "Copier et Ajuster" est sÃ©lectionnÃ©, ajustez le taux d'Ã©pargne si nÃ©cessaire
5. Appuyez sur **Enregistrer le Budget**

**Note** : Lors de la copie, les Revenus RÃ©currents et les DÃ©penses RÃ©currentes sont recalculÃ©s Ã  partir des donnÃ©es rÃ©currentes actuelles (non copiÃ©es du mois prÃ©cÃ©dent), seul le taux d'Ã©pargne est copiÃ©.

### 4.3 Afficher le rÃ©sumÃ© du budget (Cas B)

1. Allez Ã  **Fonctions** â†’ SÃ©lectionnez **Budget**
2. Si le mois actuel a un budget, l'application ouvre l'Ã©cran **RÃ©sumÃ©**
3. Affichez les informations :
   - **Budget de DÃ©penses** : Limite de dÃ©penses Ã©tablie
   - **UtilisÃ©** : Montant dÃ©pensÃ© (y compris les dÃ©penses quotidiennes et les Ã©carts de revenus/dÃ©penses)
   - **Restant** : Montant restant dans le budget
   - **Taux d'Utilisation** : % du budget utilisÃ© (avec couleurs d'avertissement)
   - **Ã‰carts de Revenus et DÃ©penses du Plan** : DÃ©viations par rapport au plan original
   - **DÃ©penses Quotidiennes par CatÃ©gorie** : Analyse dÃ©taillÃ©e des dÃ©penses par catÃ©gorie

### 4.4 Modifier le budget du mois actuel

1. Sur l'Ã©cran **RÃ©sumÃ© du Budget**, appuyez sur le bouton **"Modifier le Budget"**
2. L'application affiche l'Ã©cran de modification avec :
   - **Revenus RÃ©currents** et **DÃ©penses RÃ©currentes** : Anciennes valeurs conservÃ©es (lecture seule)
   - **Taux d'Ã‰pargne** : PrÃ©-rempli Ã  partir du budget actuel (peut Ãªtre modifiÃ©)
3. Modifiez le taux d'Ã©pargne si nÃ©cessaire
4. Affichez le montant d'Ã©pargne et le budget de dÃ©penses mis Ã  jour automatiquement
5. Appuyez sur **"Enregistrer le Budget"**

**Note** : Lors de la modification, les Revenus RÃ©currents et les DÃ©penses RÃ©currentes ne sont pas recalculÃ©s (l'ancien instantanÃ© est conservÃ©), seuls le taux d'Ã©pargne et le budget de dÃ©penses sont mis Ã  jour.

### 4.5 Afficher l'historique du budget

1. Allez Ã  **Fonctions** â†’ SÃ©lectionnez **Budget**
2. SÃ©lectionnez **Historique** dans le menu
3. Affichez la liste des budgets pour les mois passÃ©s
4. Appuyez sur un mois pour voir les dÃ©tails

### 4.6 Afficher les dÃ©tails des dÃ©penses par catÃ©gorie

1. Allez Ã  l'Ã©cran **RÃ©sumÃ© du Budget**
2. Faites dÃ©filer vers le bas jusqu'Ã  la section **Analyse par CatÃ©gorie**
3. Appuyez sur une catÃ©gorie
4. Affichez la liste des dÃ©penses dans cette catÃ©gorie

## 5. Exemples et illustrations UI

### 5.1 BUDGET-01 : CrÃ©er un budget pour la premiÃ¨re fois pour le mois actuel

**Objectif** : CrÃ©er un budget pour la premiÃ¨re fois afin que l'application calcule et suive automatiquement les dÃ©penses mensuelles en fonction des revenus et dÃ©penses rÃ©currents.

**Ã‰tapes** :
1. Allez Ã  l'Ã©cran Fonctions, sÃ©lectionnez "Gestion du Budget"
2. L'application dÃ©tecte automatiquement qu'il n'y a pas de budget et affiche l'Ã©cran "CrÃ©er un Budget"
3. Affichez les informations calculÃ©es automatiquement : Revenus RÃ©currents, DÃ©penses RÃ©currentes, Budget Total (avant Ã©pargne)
4. Entrez le taux d'Ã©pargne : 20
5. Affichez le montant d'Ã©pargne et le budget de dÃ©penses calculÃ©s automatiquement
6. Appuyez sur le bouton "Enregistrer le Budget"

**RÃ©sultat** : Budget enregistrÃ© pour le mois actuel, navigue automatiquement vers l'Ã©cran "RÃ©sumÃ© du Budget".

**Illustration UI** :

```text
[ Carte : CrÃ©er Budget Novembre 2025 ]
+------------------------------------------------+
||                                                |
|| Revenus RÃ©currents                â‚¬1,080         |
||  â€¢ Mon Salaire (Mensuel)         â‚¬1,080         |
||                                                |
|| DÃ©penses RÃ©currentes              â‚¬824          |
||  â€¢ Ã‰lectricitÃ© (Mensuel)          â‚¬31        |
||  â€¢ Eau (Mensuel)                â‚¬15        |
||  â€¢ Frais de scolaritÃ© pour BN (Mensuel)       â‚¬245       |
||  â€¢ Petit-dÃ©jeuner et CafÃ© (Hebdomadaire x 4) â‚¬32       |
||  â€¢ PrÃªt Immobilier (Mensuel)     â‚¬378      |
||                                                |
|| (Ces donnÃ©es sont rÃ©cupÃ©rÃ©es automatiquement)        |
+------------------------------------------------+

[ Carte : Budget Total (avant Ã©pargne) ]
 ------------------------------------------------
||   â‚¬1,080 (Revenus RÃ©currents)                   |
|| - â‚¬824 (DÃ©penses RÃ©currentes)                    |
||-----------------------------------------------|
|| = â‚¬256 EUR                                     |
 ------------------------------------------------

[ Carte : Taux d'Ã‰pargne ]
 ------------------------------------------------
|| Combien souhaitez-vous Ã©pargner ?                 |
||                                                |
|| Taux d'Ã‰pargne (%)                               |
|| [  EntrÃ©e (requis) : 20  ]                    |
||                                                |
|| â†’ Ã‰quivaut Ã  : â‚¬51                              |
 ------------------------------------------------

[ Carte : Budget de DÃ©penses ]
 ------------------------------------------------
||    â‚¬256 (Budget Total (avant Ã©pargne))       |
|| -  â‚¬51 (Montant d'Ã‰pargne)                        |
||-----------------------------------------------|
|| = â‚¬204 EUR                                     |
||                                                |
|| (Inclut nourriture, transport, cafÃ©, petits achats...)
 ------------------------------------------------

[ Bouton ]
 -------------------------------
||      Enregistrer le Budget              |
 -------------------------------
```

---

### 5.2 BUDGET-02 : Afficher le rÃ©sumÃ© du budget du mois actuel

**Objectif** : Afficher la situation des dÃ©penses par rapport au budget Ã©tabli, y compris les montants utilisÃ©s, les montants restants et l'analyse par catÃ©gorie.

**Ã‰tapes** :
1. Allez Ã  l'Ã©cran Fonctions, sÃ©lectionnez "Gestion du Budget"
2. L'application dÃ©tecte automatiquement qu'un budget existe et affiche l'Ã©cran "RÃ©sumÃ© du Budget"
3. Affichez la Carte 1 - Budget Mensuel : Budget de DÃ©penses, UtilisÃ©, Restant, Taux d'Utilisation
4. Affichez la Carte 2 - Ã‰carts de Revenus et DÃ©penses du Plan
5. Affichez la Carte 3 - DÃ©penses Quotidiennes par CatÃ©gorie
6. (Optionnel) Cliquez sur "Budget de DÃ©penses â€º" pour afficher le dialogue dÃ©taillÃ© avec le calcul du budget

**RÃ©sultat** : Affiche les informations complÃ¨tes du budget du mois actuel avec barre/anneau de progression et couleurs appropriÃ©es.

**Illustration UI** :

```text
[ Carte 1 â€“ Budget Novembre 2025 ]
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Budget Novembre 2025                         â”‚
â”‚                                             â”‚
â”‚ Budget de DÃ©penses â€º      â‚¬204                 â”‚
â”‚ UtilisÃ©                  â‚¬32                   â”‚
â”‚  â€¢ DÃ©penses Quotidiennes              â‚¬43          â”‚   
â”‚  â€¢ Ã‰cart de Revenus      -â‚¬144              â”‚
â”‚  â€¢ Ã‰cart de DÃ©penses       +â‚¬7               â”‚
â”‚ Restant              â‚¬94                 â”‚
â”‚                                             â”‚
â”‚                    15.4%                    â”‚
â”‚   (Vous avez utilisÃ© 15.4% du budget de dÃ©penses de ce mois)
â”‚   (Vous Ãªtes en train d'Ã©puiser le budget de dÃ©penses de ce mois)
â”‚                                             â”‚
â”‚                               [Voir Historique]â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

[ Carte 2 â€“ Ã‰carts de Revenus et DÃ©penses du Plan ]
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Ã‰carts de Revenus et DÃ©penses du Plan        â”‚
â”‚                                              â”‚
â”‚ Revenus RÃ©currents                             â”‚
â”‚  â€¢ Mon Salaire                 +â‚¬72           â”‚
â”‚    (â‚¬432 > â‚¬360)                             â”‚
â”‚                                              â”‚
â”‚ DÃ©penses RÃ©currentes                           â”‚
â”‚  â€¢ Frais de scolaritÃ© pour BN              -â‚¬4          â”‚
â”‚    (â‚¬245 > â‚¬252)                             â”‚
â”‚                                              â”‚
â”‚ Ã‰cart Total de Revenus :        +â‚¬216          â”‚
â”‚ Ã‰cart Total de DÃ©penses :        -â‚¬7          â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

[ Carte 3 â€“ DÃ©penses Quotidiennes par CatÃ©gorie ]
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ DÃ©penses Quotidiennes par CatÃ©gorie                   â”‚
â”‚ (Nourriture, Transport, CafÃ©, petits achats...)
â”‚                                             â”‚
â”‚ DÃ©penses Quotidiennes Totales : â‚¬43                    â”‚
â”‚                                             â”‚
â”‚ Nourriture              â‚¬22    50% [â–ˆâ–ˆâ–ˆâ–ˆâ–ˆ---------]â”‚
â”‚ Transport     â‚¬11    25% [â–ˆâ–ˆâ–ˆ-----------]â”‚
â”‚ CafÃ©             â‚¬7     17% [â–ˆâ–ˆ------------]â”‚
â”‚ Petits Achats     â‚¬4     8%  [â–ˆ-------------]â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

### 5.3 BUDGET-03 : Modifier le budget du mois actuel

**Objectif** : Ajuster le taux d'Ã©pargne pour modifier le budget de dÃ©penses du mois actuel.

**Ã‰tapes** :
1. Sur l'Ã©cran "RÃ©sumÃ© du Budget", appuyez sur le bouton "Modifier le Budget"
2. L'application affiche l'Ã©cran de modification (similaire Ã  l'Ã©cran CrÃ©er un Budget)
3. Affichez les informations actuelles : Revenus RÃ©currents, DÃ©penses RÃ©currentes (anciennes valeurs conservÃ©es)
4. Modifiez le taux d'Ã©pargne Ã  25
5. Affichez le montant d'Ã©pargne et le budget de dÃ©penses mis Ã  jour automatiquement
6. Appuyez sur le bouton "Enregistrer le Budget"

**RÃ©sultat** : Budget mis Ã  jour, retourne Ã  l'Ã©cran "RÃ©sumÃ© du Budget" avec les nouvelles valeurs.

**Illustration UI** : Similaire Ã  BUDGET-01 (Ã©cran CrÃ©er un Budget), mais les valeurs de Revenus RÃ©currents et DÃ©penses RÃ©currentes sont en lecture seule et conservÃ©es de l'ancien budget.

---

### 5.4 BUDGET-04 : Copier le budget du mois prÃ©cÃ©dent lorsque le nouveau mois commence

**Objectif** : RÃ©utiliser le budget du mois prÃ©cÃ©dent pour gagner du temps lors de la crÃ©ation d'un nouveau budget, avec option d'ajustement si nÃ©cessaire.

**Ã‰tapes** :
1. Allez Ã  l'Ã©cran Fonctions, sÃ©lectionnez "Gestion du Budget"
2. L'application dÃ©tecte automatiquement que le mois actuel n'a pas de budget, mais le mois prÃ©cÃ©dent en a un, affiche l'Ã©cran "Suggestion de Copier le Budget"
3. SÃ©lectionnez "Copier et Ajuster"
4. L'application navigue vers l'Ã©cran CrÃ©er un Budget avec le taux d'Ã©pargne prÃ©-rempli du mois prÃ©cÃ©dent
5. (Optionnel) Ajustez le taux d'Ã©pargne si nÃ©cessaire
6. Appuyez sur le bouton "Enregistrer le Budget"

**RÃ©sultat** : Nouveau budget crÃ©Ã© pour le mois actuel, navigue automatiquement vers l'Ã©cran "RÃ©sumÃ© du Budget".

**Illustration UI** :

```text
[ Ã‰CRAN ]  Budget DÃ©cembre 2025
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ DÃ©cembre 2025 n'a pas de budget                 â”‚
â”‚                                              â”‚
â”‚ Comment souhaitez-vous crÃ©er le budget du nouveau mois ?â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                              â”‚
â”‚ ğŸ“ Copier et Ajuster â€º                          â”‚
â”‚    Note : Copier et ajuster le budget Novembre 2025â”‚
â”‚                                              â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                              â”‚
â”‚ â• CrÃ©er un Nouveau Budget â€º                      â”‚
â”‚   Note : ExÃ©cuter le flux de crÃ©ation de budget Ã  nouveau        â”‚
â”‚                                              â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

AprÃ¨s avoir sÃ©lectionnÃ© "Copier et Ajuster", l'Ã©cran CrÃ©er un Budget s'affiche de maniÃ¨re similaire Ã  BUDGET-01, mais le taux d'Ã©pargne est prÃ©-rempli du mois prÃ©cÃ©dent.

## 6. Logique et rÃ¨gles

### 6.1 Cas

- **Cas A** : CrÃ©er un budget pour la premiÃ¨re fois (aucun budget pour aucun mois)
- **Cas B** : Le mois actuel a un budget â†’ Afficher le rÃ©sumÃ©
- **Cas C** : Le mois actuel n'en a pas, mais le mois prÃ©cÃ©dent en a un â†’ Suggestion de copie

### 6.2 Calcul automatique

- **Revenus RÃ©currents** : Total de tous les `recurring_income` actifs
- **DÃ©penses RÃ©currentes** : Total de toutes les `recurring_expense` actives
- **DÃ©penses Quotidiennes** : Total des `daily_expense` du mois
- **Budget Total** : Revenus RÃ©currents + Revenus SupplÃ©mentaires
- **Ã‰pargne** : Budget Total Ã— Taux d'Ã‰pargne

### 6.3 IntÃ©gration avec d'autres modules

- Lors de la confirmation d'un revenu rÃ©current â†’ Mettre Ã  jour le budget automatiquement
- Lors de la confirmation d'une dÃ©pense rÃ©currente â†’ Mettre Ã  jour le budget automatiquement
- Les dÃ©penses quotidiennes sont automatiquement calculÃ©es dans le budget

### 6.4 Avertissement de dÃ©passement du budget

- L'application affiche un avertissement lorsque les dÃ©penses dÃ©passent le budget
- L'avertissement est affichÃ© sur l'Ã©cran d'accueil et dans les notifications

### 6.5 InstantanÃ©

- Lors de la crÃ©ation du budget, l'application crÃ©e un instantanÃ© des Ã©lÃ©ments de revenus/dÃ©penses pour enregistrer l'Ã©tat Ã  ce moment-lÃ 
- L'instantanÃ© est utilisÃ© pour la comparaison et l'analyse

## 7. Notes importantes

- **Un budget par mois** : Vous devez crÃ©er un budget pour chaque mois
- **Modifier le budget** : Vous pouvez modifier le budget du mois actuel en changeant le taux d'Ã©pargne. Les Revenus RÃ©currents et les DÃ©penses RÃ©currentes restent inchangÃ©s (instantanÃ©), pour assurer la prÃ©cision
- **Mise Ã  jour automatique** : Le budget se met Ã  jour automatiquement lorsque vous confirmez les revenus/dÃ©penses
- **Copier du mois prÃ©cÃ©dent** : La fonction de copie vous aide Ã  gagner du temps lors de la crÃ©ation du budget

