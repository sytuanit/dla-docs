# 재무 목표

## 1. 목적

**재무 목표** 모듈은 다음을 지원합니다:
- 재무 목표 설정 (예: 집 사기, 차 사기)
- 목표 달성을 위한 재무 계획
- 재무 가정 평가
- 대출 시나리오 비교
- 목표 진행 추적

## 2. 사용 시기

다음과 같은 경우 이 모듈을 사용합니다:
- 주요 재무 목표 계획
- 자산 구매를 위한 차입 능력 평가
- 재무 옵션 비교
- 저축 진행 추적

## 3. 관련 화면

- 재무 목표 생성 (3단계)
- 목표 상세 및 계획
- 대출 계획 표시
- 가정 평가
- 가정 및 대출 평가

## 4. 주요 사용 방법

### 4.1 재무 목표 생성 (3단계)

#### 단계 1: 재무 계획 입력

1. **기능** → **계획 및 가정** 선택
2. **➕ 새로 추가** (FAB) 버튼 탭
3. 자동 입력된 정보 확인:
   - **평균 수입**: 활성 정기 수입에서 자동 가져오기 (클릭하여 내역 표시 가능)
   - **고정 지출**: 활성 정기 지출 + 대출 상환에서 자동 가져오기 (클릭하여 내역 표시 가능)
   - **현재 잔액**: 현재 잔액에서 자동 가져오기
4. **생활비** 입력: 월별 생활비 (식사, 교통비 등)
5. 자동 계산된 예측 확인:
   - 12개월 후
   - 24개월 후
   - 36개월 후
   (현재 수입 및 지출 수준을 유지하는 경우)
6. **계속** 탭

#### 단계 2: 목표 정보 입력

1. **목표명** 입력: (예: "집 사기")
2. **필요 금액** 입력: 목표 달성에 필요한 총액
3. **계약금** 확인: 현재 잔액에서 자동 입력 (편집 가능)
4. **계속** 탭

#### 단계 3: 목표 달성 능력 확인

1. 목표 정보 확인: 이름, 목표값, 계약금, 남은 차이
2. 현재 재무 확인: 평균 수입, 평균 지출, 평균 저축
3. 결론 확인:
   - "약 X년 후 목표를 달성합니다" (저축 > 0인 경우)
   - "현재 상황에서는 차입 또는 재무 개선 없이는 목표를 달성할 수 없습니다" (저축 <= 0인 경우)
4. 다음 옵션 확인:
   - **대출 옵션 표시**: 차입 능력 평가
   - **수입/지출 가정 생성**: 재무 개선 시뮬레이션
   - **가정 + 대출 결합**: 최적 시나리오
5. **목표 저장** 탭 (지금 저장하거나 나중에 계획 생성)

### 4.2 목표 목록 및 상세 표시

1. **기능** → **계획 및 가정** 선택
2. 생성된 목표 목록 확인:
   - 각 목표에 표시: 이름, 목표값, 지불한 계약금, 남은 차이
3. (선택 사항) 검색 바를 사용하여 목표명으로 검색
4. 목표를 탭하여 상세 표시:
   - **목표 정보**: 이름, 목표값, 계약금, 남은 차이
   - **재무 계획 (기준선)**: 클릭하여 평균 수입, 지출, 저축을 포함한 대화상자 표시
   - **저장된 계획 목록**: 생성된 대출 계획, 가정 또는 결합

### 4.3 목표의 대출 계획 생성

1. 목표 상세 화면에서 **➕ 새로 추가** 버튼 탭
2. 앱이 계획 유형을 선택하는 대화상자 표시, **"대출"** 선택
3. 대출 정보 입력: 대출액, 금리, 대출 기간, 계획명
4. 자동 계산된 결과 확인: 월별 상환, 총 지불액, 목표 달성까지의 시간, 지불 능력
5. **계획 저장** 탭

### 4.4 수입/지출 가정 생성

1. 목표 상세 화면에서 **➕ 새로 추가** 버튼 탭
2. 앱이 계획 유형을 선택하는 대화상자 표시, **"가정"** 선택
3. 가정 입력:
   - **수입 증가**: 추가 금액 (증가가 없는 경우 공백으로 유지)
   - **지출 감소**: 감소 금액 (감소가 없는 경우 공백으로 유지)
   - 가정명
4. 자동 계산된 결과 확인: 새 수입, 새 지출, 새 저축, 목표 달성까지의 새 시간
5. **가정 저장** 탭

### 4.5 재무 목표 삭제

1. 목표 상세 화면으로 이동
2. 목표 카드의 오른쪽 상단 **삭제** 버튼 (삭제 아이콘) 탭
3. 앱이 확인 대화상자 표시
4. **삭제** 탭하여 확인

**참고**: 목표를 삭제하면 모든 관련 계획도 삭제되며 되돌릴 수 없습니다.

## 5. 예시 및 UI 설명

### 5.1 PLANNING-01: 새 재무 목표 생성 (집 사기)

**목표**: 목표를 계획하고 해당 목표를 달성하는 능력을 시뮬레이션하기 위해 재무 목표를 생성합니다.

**단계**:
1. 기능 화면으로 이동, "계획 및 가정" 선택
2. "➕ 새로 추가" 버튼 탭
3. **단계 1**: 재무 계획 입력 (자동 입력된 정보 확인, 생활비 입력, 예측 확인)
4. **단계 2**: 목표 정보 입력 (이름, 필요 금액, 계약금)
5. **단계 3**: 목표 달성 능력 확인 (결론 및 옵션 확인)
6. "목표 저장" 탭

**결과**: 목표가 저장되고, 목표 목록 화면으로 돌아갑니다.

**UI 설명 - 단계 1: 재무 계획 입력**:

```text
┌─────────────────────────────────────────┐
│  ← 돌아가기    목표 생성 (1/3)          │
├─────────────────────────────────────────┤
│  재무 계획                              │
│                                         │
│  평균 수입 *                            │
│  [₩1,560,000]                           │
│  (정기 항목에서 기본값)                 │
│  [내역 표시]                            │
│                                         │
│  고정 지출 *                            │
│  [₩1,190,800]                           │
│  (정기 항목에서 기본값)                 │
│  [내역 표시]                            │
│                                         │
│  생활비 *                               │
│  [₩260,000]                             │
│  (식사, 교통비 등이 포함됩니다)         │
│                                         │
│  현재 잔액 *                             │
│  [₩2,600,000]                           │
│  (현재 잔액에서 기본값)                 │
│                                         │
│  예측                                   │
│  ┌───────────────────────────────────┐ │
│  │ 12개월 후: ₩3,848,000             │ │
│  │ 24개월 후: ₩5,096,000             │ │
│  │ 36개월 후: ₩6,344,000             │ │
│  └───────────────────────────────────┘ │
│                                         │
│  [계속] [취소]                          │
└─────────────────────────────────────────┘
```

**UI 설명 - 단계 2: 목표 정보 입력**:

```text
┌─────────────────────────────────────────┐
│  ← 돌아가기    목표 생성 (2/3)          │
├─────────────────────────────────────────┤
│  목표 정보 입력                          │
│                                         │
│  목표명 *                               │
│  [집 사기]                              │
│  (예: 집 사기, 차 사기...)              │
│                                         │
│  필요 금액 *                            │
│  [₩104,000,000]                         │
│  (목표 달성에 필요한 총액)              │
│                                         │
│  계약금                                 │
│  [₩2,600,000]                           │
│  (기본값 = 현재 잔액)                   │
│                                         │
│  [계속] [돌아가기]                      │
└─────────────────────────────────────────┘
```

**UI 설명 - 단계 3: 목표 달성 능력 확인**:

```text
┌─────────────────────────────────────────┐
│  ← 돌아가기    목표 생성 (3/3)          │
├─────────────────────────────────────────┤
│  목표 달성 능력 확인                     │
│                                         │
│  목표 정보                              │
│  ┌───────────────────────────────────┐ │
│  │ 목표: 집 사기                     │ │
│  │ 목표값: ₩104,000,000              │ │
│  │ 계약금: ₩2,600,000                │ │
│  │ 남은 차이: ₩101,400,000           │ │
│  └───────────────────────────────────┘ │
│                                         │
│  현재 재무                              │
│  ┌───────────────────────────────────┐ │
│  │ 평균 수입: ₩1,560,000             │ │
│  │ 평균 지출: ₩1,450,800             │ │
│  │ 평균 저축: ₩109,200               │ │
│  └───────────────────────────────────┘ │
│                                         │
│  현재 상황을 유지하는 경우               │
│  월별 저축: ₩109,200                    │
│  약 77년이 필요합니다                   │
│                                         │
│  결론                                   │
│  현재 상황에서는 차입 또는 재무 개선 없이는│
│  목표를 달성할 수 없습니다              │
│                                         │
│  다음에 무엇을 하시겠습니까?            │
│  ┌───────────────────────────────────┐ │
│  │ 대출 옵션 표시 ›                  │ │
│  │ (대출이 도움이 되는지 확인하고 싶은 경우...)│ │
│  └───────────────────────────────────┘ │
│  ┌───────────────────────────────────┐ │
│  │ 수입/지출 가정 생성 ›             │ │
│  │ (개선을 시도하고 싶은 경우...)    │ │
│  └───────────────────────────────────┘ │
│                                         │
│  [목표 저장] [돌아가기]                 │
└─────────────────────────────────────────┘
```

---

### 5.2 PLANNING-02: 목표 목록 및 상세 표시

**목표**: 생성된 목표의 목록을 표시하고, 저장된 계획을 포함한 각 목표의 상세를 표시합니다.

**단계**:
1. 기능 화면으로 이동, "계획 및 가정" 선택
2. 생성된 목표 목록 확인
3. (선택 사항) 검색 바를 사용하여 목표명으로 검색
4. 목표를 탭하여 상세 표시
5. 목표 정보, 재무 계획 (기준선), 저장된 계획 목록 확인

**결과**: 완전한 목표 정보와 저장된 계획을 표시합니다.

**UI 설명 - 목표 목록**:

```text
┌─────────────────────────────────────────┐
│  ← 돌아가기    계획 및 가정             │
├─────────────────────────────────────────┤
│  [🔍 목표명으로 검색]                   │
│                                         │
│  ┌───────────────────────────────────┐ │
│  │ 집 사기                            │
│  │ 🎯 목표값: ₩104,000,000            │
│  │ 💰 계약금: ₩2,600,000              │
│  │ ⚠️ 남은 차이: ₩101,400,000         │
│  └───────────────────────────────────┘ │
│                                         │
│  ┌───────────────────────────────────┐ │
│  │ 차 사기                            │
│  │ 🎯 목표값: ₩26,000,000             │
│  │ 💰 계약금: ₩1,040,000              │
│  │ ⚠️ 남은 차이: ₩24,960,000          │
│  └───────────────────────────────────┘ │
│                                         │
│  [➕ 새로 추가]                         │
└─────────────────────────────────────────┘
```

**UI 설명 - 목표 상세**:

```text
┌─────────────────────────────────────────┐
│  ← 돌아가기    목표: 집 사기             │
├─────────────────────────────────────────┤
│  목표 정보                              │
│  ┌───────────────────────────────────┐ │
│  │ 🎯 목표값: ₩104,000,000            │
│  │ 💰 계약금: ₩2,600,000              │
│  │ ⚠️ 남은 차이: ₩101,400,000         │
│  │                                    │
│  │ [🗑️ 삭제]                          │
│  └───────────────────────────────────┘ │
│                                         │
│  [📊 재무 계획 표시 (기준선)]           │
│                                         │
│  저장된 계획 목록                        │
│  ┌───────────────────────────────────┐ │
│  │ 집 가치의 80%를 대출               │
│  │ 대출: ₩78,000,000                 │
│  │ 금리: 8%/년                       │
│  │ 기간: 20년                        │
│  │ [상세 표시]                       │
│  └───────────────────────────────────┘ │
│  ┌───────────────────────────────────┐ │
│  │ 수입 증가 + 지출 감소              │
│  │ 새 수입: ₩1,820,000                │
│  │ 새 지출: ₩1,398,800                │
│  │ 새 저축: ₩421,200                  │
│  │ [상세 표시]                       │
│  └───────────────────────────────────┘ │
│                                         │
│  [➕ 새로 추가]                         │
└─────────────────────────────────────────┘
```

---

### 5.3 PLANNING-03: 목표의 대출 계획 생성

**목표**: 차입이 목표 달성까지의 시간을 단축하고 지불 능력을 향상시키는지 확인하기 위해 대출 계획을 생성합니다.

**단계**:
1. 목표 상세 화면에서 "➕ 새로 추가" 버튼 탭
2. 대화상자에서 "대출" 선택
3. 대출 정보 입력: 대출액, 금리, 대출 기간, 계획명
4. 자동 계산된 결과 확인
5. "계획 저장" 탭

**결과**: 대출 계획이 저장되고, 계획 목록에 표시됩니다.

**UI 설명**: 대출 계획 생성 화면 (관련 화면에 상세가 있습니다).

---

### 5.4 PLANNING-04: 목표 달성 능력을 향상시키기 위해 수입/지출 가정 생성

**목표**: 수입을 늘리거나 지출을 줄이는 가정을 생성하여 이것이 목표를 더 빨리 달성하는 데 도움이 되는지 확인합니다.

**단계**:
1. 목표 상세 화면에서 "➕ 새로 추가" 버튼 탭
2. 대화상자에서 "가정" 선택
3. 가정 입력: 수입 증가 (있는 경우), 지출 감소 (있는 경우), 가정명
4. 자동 계산된 결과 확인
5. "가정 저장" 탭

**결과**: 가정이 저장되고, 계획 목록에 표시됩니다.

**UI 설명**: 가정 생성 화면 (관련 화면에 상세가 있습니다).

---

### 5.5 PLANNING-05: 재무 목표 삭제

**목표**: 더 이상 필요하지 않은 재무 목표를 삭제합니다.

**단계**:
1. 목표 상세 화면으로 이동
2. "삭제" 버튼 (삭제 아이콘) 탭
3. 대화상자에서 삭제 확인

**결과**: 목표와 모든 관련 계획이 삭제되었습니다.

**UI 설명**: 목표 삭제 확인 대화상자.

## 6. 로직 및 규칙

### 6.1 예측 계산

- 예측은 다음을 기반으로 합니다:
  - 수입 - 고정 지출 - 생활비 = 저축/월
  - 현재 잔액 + (저축/월 × 월수)

### 6.2 목표

- 남은 차이 = 필요 금액 - 계약금
- 추정 시간 = 남은 차이 / 평균 저축 (월)
- 평균 저축 <= 0인 경우: 차입 또는 재무 개선 없이는 목표를 달성할 수 없습니다

### 6.3 대출 계획

- 계산은 다음을 기반으로 합니다:
  - 대출액
  - 금리
  - 기간
  - 상환 일정 자동 생성

### 6.4 재무 가정

- 다음과 같은 가정을 평가:
  - 수입 증가/감소
  - 지출 증가/감소
  - 금리 변경
- 목표 달성 능력에 대한 영향 확인

## 7. 중요 참고 사항

- **프리미엄 모듈 필수**: 이 기능은 프리미엄 사용자만 사용 가능
- **예측은 참고용**: 안정적인 수입과 지출 가정에 기반합니다
- **여러 계획 생성 가능**: 여러 계획 (대출, 가정, 결합)을 생성하여 비교할 수 있습니다
- **기준선이 저장됩니다**: 초기 재무 계획 (기준선)은 목표 생성 시 저장되며, 이후 계획과 비교하기 위해 사용됩니다
- **자동 계산**: 수입과 고정 지출은 은행 대출 상환을 포함한 활성 정기 항목에서 자동으로 가져옵니다
- **목표 삭제**: 목표를 삭제할 때 모든 관련 계획도 삭제되며 복원할 수 없습니다

