# 백업 및 복원

## 1. 목적

**백업 및 복원** 모듈은 다음을 지원합니다:
- 모든 앱 데이터를 파일로 백업
- 백업 파일에서 데이터 복원
- 디바이스 오류 또는 앱 재설치로 인한 데이터 손실로부터 보호

## 2. 사용 시기

다음과 같은 경우 이 모듈을 사용합니다:
- 앱 재설치 전 데이터 백업
- 새 디바이스로 데이터 전송
- 데이터 손실 후 데이터 복원
- 정기적인 백업 생성

## 3. 관련 화면

- 백업 화면
- 복원 화면

## 4. 주요 사용 방법

### 4.1 데이터 백업

1. **설정** → **백업 및 데이터** → **백업**으로 이동
2. 정보 확인:
   - 백업될 레코드 수
   - 예상 파일 크기
3. **백업** 탭
4. 저장 위치 선택 (파일 시스템)
5. 백업 파일이 생성됩니다 (이름: `dla-backup-YYYY-MM-DD-HHmmss.json`)
6. 이 파일을 안전한 위치 (클라우드, 컴퓨터 등)에 저장

### 4.2 데이터 복원

1. **설정** → **백업 및 데이터** → **복원**으로 이동
2. 파일 시스템에서 백업 파일 선택
3. 파일 정보 확인:
   - 백업 생성일
   - 레코드 수
   - 파일 크기
4. **경고**: 복원은 모든 현재 데이터를 덮어씁니다
5. **복원** 탭
6. 복원 확인
7. 복원 프로세스가 완료될 때까지 대기
8. 앱이 자동으로 다시 로드됩니다

## 5. UI 설명 (와이어프레임)

### 5.1 백업 화면

```text
┌─────────────────────────────────────────┐
│  ← 돌아가기    데이터 백업                │
├─────────────────────────────────────────┤
│  백업 정보                                │
│                                         │
│  ┌───────────────────────────────────┐ │
│  │ 레코드 수                           │ │
│  │ 1,234개                            │ │
│  │                                    │ │
│  │ 예상 크기                           │ │
│  │ ~2.5 MB                            │ │
│  │                                    │ │
│  │ 백업될 데이터:                      │ │
│  │ • 정기 수입                         │ │
│  │ • 정기 지출                         │ │
│  │ • 일일 지출                         │ │
│  │ • 예산                              │ │
│  │ • 저축                              │ │
│  │ • 대출                              │ │
│  │ • 특별한 날                         │ │
│  │ • 카테고리                           │ │
│  └───────────────────────────────────┘ │
│                                         │
│  [백업]                                 │
└─────────────────────────────────────────┘
```

### 5.2 복원 화면

```text
┌─────────────────────────────────────────┐
│  ← 돌아가기    데이터 복원                │
├─────────────────────────────────────────┤
│  백업 파일 선택                           │
│                                         │
│  [파일 선택...]                          │
│                                         │
│  파일 정보                               │
│  ┌───────────────────────────────────┐ │
│  │ 파일: dla-backup-2024-11-15.json  │ │
│  │                                    │ │
│  │ 생성일: 2024/11/15 10:30          │ │
│  │                                    │ │
│  │ 레코드 수: 1,234                   │ │
│  │                                    │ │
│  │ 크기: 2.5 MB                       │ │
│  └───────────────────────────────────┘ │
│                                         │
│  ⚠️ 경고                                 │
│  복원은 모든 현재 데이터를 덮어씁니다.  │
│  계속하시겠습니까?                      │
│                                         │
│  [복원] [취소]                          │
└─────────────────────────────────────────┘
```

## 6. 로직 및 규칙

### 6.1 백업 파일 형식

- 백업 파일은 JSON 형식
- 파일명: `dla-backup-YYYY-MM-DD-HHmmss.json`
- 모든 데이터 포함: 사용자, 카테고리, 거래, 예산 등

### 6.2 백업되는 데이터

- 데이터베이스 내의 모든 테이블
- 시스템 데이터와 사용자 데이터 모두 포함
- 포함되지 않는 것: 앱 설정, 환경 설정 (언어, 통화)

### 6.3 복원

- 복원은 모든 현재 데이터를 삭제합니다
- 그 후 백업 파일에서 데이터를 가져옵니다
- 복원 완료 후 앱이 자동으로 다시 로드됩니다

### 6.4 검증

- 앱은 복원 전에 파일 형식을 확인합니다
- 버전 호환성 확인 (있는 경우)
- 파일이 유효하지 않은 경우 오류를 표시합니다

## 7. 중요 참고 사항

- **정기적으로 백업**: 정기적으로 (주별 또는 월별) 백업해야 합니다
- **여러 위치에 저장**: 백업 파일을 여러 위치 (클라우드, 컴퓨터, USB)에 저장
- **복원은 현재 데이터를 잃습니다**: 복원 전에 현재 데이터를 백업했는지 확인하세요
- **되돌릴 수 없음**: 복원 후 되돌릴 수 없습니다

