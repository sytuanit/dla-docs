# Thu nháº­p thÃªm

## 1. Má»¥c Ä‘Ã­ch

Module **Thu nháº­p thÃªm** giÃºp báº¡n ghi nháº­n cÃ¡c khoáº£n thu nháº­p khÃ´ng Ä‘á»‹nh ká»³, khÃ´ng cÃ³ chu ká»³ cá»‘ Ä‘á»‹nh nhÆ°:
- BÃ¡n hÃ ng online
- Freelance
- ThÆ°á»Ÿng
- QuÃ  táº·ng tiá»n máº·t
- CÃ¡c khoáº£n thu nháº­p báº¥t thÆ°á»ng khÃ¡c

KhÃ¡c vá»›i **Thu nháº­p Ä‘á»‹nh ká»³**, thu nháº­p thÃªm khÃ´ng cÃ³ chu ká»³ tá»± Ä‘á»™ng, báº¡n pháº£i nháº­p thá»§ cÃ´ng má»—i láº§n.

## 2. Khi nÃ o nÃªn dÃ¹ng

Sá»­ dá»¥ng module nÃ y khi báº¡n muá»‘n:
- Ghi nháº­n cÃ¡c khoáº£n thu nháº­p ngáº«u nhiÃªn, khÃ´ng Ä‘á»‹nh ká»³
- Theo dÃµi tá»•ng thu nháº­p trong khoáº£ng thá»i gian
- PhÃ¢n tÃ­ch xu hÆ°á»›ng thu nháº­p thÃªm
- TÃ­nh vÃ o ngÃ¢n sÃ¡ch hÃ ng thÃ¡ng

## 3. CÃ¡c mÃ n hÃ¬nh liÃªn quan

- **ExtraIncomeList** - Danh sÃ¡ch thu nháº­p thÃªm
- **AddExtraIncome** - ThÃªm thu nháº­p má»›i
- **EditExtraIncome** - Sá»­a thu nháº­p

## 4. CÃ¡ch sá»­ dá»¥ng chÃ­nh

### 4.1 ThÃªm thu nháº­p thÃªm

1. VÃ o **Chá»©c nÄƒng** â†’ Chá»n **Thu nháº­p thÃªm**
2. Nháº¥n nÃºt **+** (FAB) á»Ÿ gÃ³c dÆ°á»›i bÃªn pháº£i
3. Äiá»n thÃ´ng tin:
   - **Danh má»¥c**: Chá»n hoáº·c táº¡o danh má»¥c má»›i
   - **Sá»‘ tiá»n**: Nháº­p sá»‘ tiá»n Ä‘Ã£ nháº­n
   - **NgÃ y**: Chá»n ngÃ y nháº­n tiá»n (máº·c Ä‘á»‹nh lÃ  hÃ´m nay)
   - **Ghi chÃº**: MÃ´ táº£ chi tiáº¿t (tÃ¹y chá»n)
4. Nháº¥n **LÆ°u**

### 4.2 Xem danh sÃ¡ch thu nháº­p

1. VÃ o **Chá»©c nÄƒng** â†’ Chá»n **Thu nháº­p thÃªm**
2. Danh sÃ¡ch hiá»ƒn thá»‹ theo layout báº¡n Ä‘Ã£ cáº¥u hÃ¬nh (1, 2, 3, hoáº·c 4 cá»™t)
3. Sá»­ dá»¥ng **TÃ¬m kiáº¿m** Ä‘á»ƒ lá»c theo danh má»¥c hoáº·c ghi chÃº
4. Chá»n **Bá»™ lá»c thá»i gian**: HÃ´m nay / Tuáº§n nÃ y / ThÃ¡ng nÃ y / ThÃ¡ng trÆ°á»›c / TÃ¹y chá»n

### 4.3 Sá»­a thu nháº­p

1. VÃ o danh sÃ¡ch thu nháº­p thÃªm
2. Nháº¥n vÃ  giá»¯ (long press) vÃ o item cáº§n sá»­a
3. Chá»n **Sá»­a** tá»« menu
4. Cáº­p nháº­t thÃ´ng tin
5. Nháº¥n **LÆ°u**

### 4.4 XÃ³a thu nháº­p

1. VÃ o danh sÃ¡ch thu nháº­p thÃªm
2. Nháº¥n vÃ  giá»¯ (long press) vÃ o item cáº§n xÃ³a
3. Chá»n **XÃ³a** tá»« menu
4. XÃ¡c nháº­n xÃ³a

## 5. Minh hoáº¡ giao diá»‡n (Wireframe)

### 5.1 MÃ n hÃ¬nh Danh sÃ¡ch (ExtraIncomeList)

```text
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  â† Quay láº¡i    Thu nháº­p thÃªm            â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  [ğŸ” TÃ¬m kiáº¿m...]                        â”‚
â”‚  [ThÃ¡ng nÃ y â–¼] [Tuáº§n nÃ y] [HÃ´m nay]     â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚ BÃ¡n hÃ ng online                    â”‚ â”‚
â”‚  â”‚ 500,000 Ä‘                          â”‚ â”‚
â”‚  â”‚ 15/11/2024                         â”‚ â”‚
â”‚  â”‚                                    â”‚ â”‚
â”‚  â”‚ [Sá»­a] [XÃ³a]                        â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚                                         â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚ Freelance                           â”‚ â”‚
â”‚  â”‚ 1,000,000 Ä‘                        â”‚ â”‚
â”‚  â”‚ 14/11/2024                         â”‚ â”‚
â”‚  â”‚                                    â”‚ â”‚
â”‚  â”‚ [Sá»­a] [XÃ³a]                        â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚                                         â”‚
â”‚  Tá»•ng: 1,500,000 Ä‘                     â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                    [+]   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 5.2 MÃ n hÃ¬nh ThÃªm/Sá»­a (AddExtraIncome / EditExtraIncome)

```text
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  â† Quay láº¡i    ThÃªm thu nháº­p thÃªm        â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  Danh má»¥c *                              â”‚
â”‚  [BÃ¡n hÃ ng online â–¼]                     â”‚
â”‚                                         â”‚
â”‚  Sá»‘ tiá»n *                               â”‚
â”‚  [500,000] Ä‘                             â”‚
â”‚                                         â”‚
â”‚  NgÃ y *                                  â”‚
â”‚  [15/11/2024]                            â”‚
â”‚                                         â”‚
â”‚  Ghi chÃº                                 â”‚
â”‚  [BÃ¡n sáº£n pháº©m A]                        â”‚
â”‚                                         â”‚
â”‚  [LÆ°u] [Há»§y]                            â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## 6. Logic & quy táº¯c

### 6.1 Layout hiá»ƒn thá»‹

- Báº¡n cÃ³ thá»ƒ cáº¥u hÃ¬nh sá»‘ cá»™t hiá»ƒn thá»‹: 1, 2, 3, hoáº·c 4 cá»™t
- Layout Ä‘Æ°á»£c lÆ°u trong cÃ i Ä‘áº·t vÃ  Ã¡p dá»¥ng cho táº¥t cáº£ danh sÃ¡ch thu nháº­p thÃªm

### 6.2 Bá»™ lá»c thá»i gian

- **HÃ´m nay**: Chá»‰ hiá»ƒn thá»‹ thu nháº­p trong ngÃ y
- **Tuáº§n nÃ y**: Tá»« Ä‘áº§u tuáº§n Ä‘áº¿n hÃ´m nay
- **ThÃ¡ng nÃ y**: Tá»« Ä‘áº§u thÃ¡ng Ä‘áº¿n hÃ´m nay
- **ThÃ¡ng trÆ°á»›c**: ToÃ n bá»™ thÃ¡ng trÆ°á»›c
- **TÃ¹y chá»n**: Chá»n khoáº£ng thá»i gian tÃ¹y Ã½

### 6.3 TÃ¬m kiáº¿m

- TÃ¬m kiáº¿m trong **tÃªn danh má»¥c** vÃ  **ghi chÃº**
- KhÃ´ng phÃ¢n biá»‡t hoa thÆ°á»ng
- TÃ¬m kiáº¿m real-time khi gÃµ

### 6.4 TÃ­ch há»£p vá»›i NgÃ¢n sÃ¡ch

- Thu nháº­p thÃªm Ä‘Æ°á»£c tÃ­nh vÃ o "Thu nháº­p thÃªm" trong ngÃ¢n sÃ¡ch
- GiÃºp báº¡n theo dÃµi tá»•ng thu nháº­p hÃ ng thÃ¡ng

## 7. LÆ°u Ã½ quan trá»ng

- **KhÃ´ng cÃ³ chu ká»³**: Thu nháº­p thÃªm khÃ´ng cÃ³ chu ká»³ tá»± Ä‘á»™ng, báº¡n pháº£i nháº­p thá»§ cÃ´ng má»—i láº§n
- **CÃ³ thá»ƒ xÃ³a**: Báº¡n cÃ³ thá»ƒ xÃ³a báº¥t ká»³ thu nháº­p nÃ o
- **TÃ­ch há»£p ngÃ¢n sÃ¡ch**: Thu nháº­p thÃªm tá»± Ä‘á»™ng tÃ­nh vÃ o ngÃ¢n sÃ¡ch thÃ¡ng hiá»‡n táº¡i

## 8. Mapping ká»¹ thuáº­t (for dev)

### 8.1 Routes / Route Names

- `ExtraIncomeList` - Danh sÃ¡ch
- `AddExtraIncome` - ThÃªm má»›i
- `EditExtraIncome` - Sá»­a (param: `extraIncomeId`)

### 8.2 Screen File Paths

- `src/screens/finance/ExtraIncomeListScreen.tsx`
- `src/screens/finance/AddExtraIncomeScreen.tsx`
- `src/screens/finance/EditExtraIncomeScreen.tsx`

### 8.3 Services / Repos File Paths

- `src/data/repo/extra-income.repository.ts` - `extraIncomeRepo`, `extraIncomeCategoryRepo`
- `src/modules/finance/hooks/useExtraIncomeList.ts` - Custom hook cho list
- `src/services/layoutSettings.service.ts` - `getExtraIncomeLayout`, `setExtraIncomeLayout`
- `src/domain/finance/extra-income.utils.ts` - `formatOccurredDate`

### 8.4 DB Tables / Models

- `extra_income` - Báº£ng thu nháº­p thÃªm
  - `id`, `user_id`, `category_id`, `amount`, `occurred_at`, `note`, `created_at`, `updated_at`
- `extra_income_category` - Báº£ng danh má»¥c
  - `id`, `user_id`, `name`, `type` (SYSTEM/USER), `is_active`
- `category_translation` - Báº£ng dá»‹ch danh má»¥c (i18n)
  - `id`, `category_id`, `category_type` = 'extra_income', `locale`, `name`

### 8.5 i18n Keys

- `extra_income.list_title` - "Thu nháº­p thÃªm"
- `extra_income.add_title` - "ThÃªm thu nháº­p thÃªm"
- `extra_income.edit_title` - "Sá»­a thu nháº­p thÃªm"
- `extra_income.category` - "Danh má»¥c"
- `extra_income.amount` - "Sá»‘ tiá»n"
- `extra_income.date` - "NgÃ y"
- `extra_income.note` - "Ghi chÃº"
- VÃ  nhiá»u keys khÃ¡c trong `src/i18n/locales/vi.json` dÆ°á»›i key `extra_income`

